<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Chatroom - WhatsApp SN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav th:replace="~{fragments/navbar.html :: navbar}"> </nav>

<div class="container my-5">
    <a th:href="@{/chatrooms/{id}/view-chatroom(id=${chatroom.id})}" class="btn btn-secondary mb-4">Back</a>
    <form th:action="@{/chatrooms/leave/{id}(id=${chatroomId})}" method="post" class="d-inline">
        <button type="submit" class="btn btn-danger">Leave Chatroom</button>
    </form>

    <h2>
        <span th:if="${chatroom.type == T(com.app.model.ChatroomType).GROUP and chatroom.editableName}">
            <span th:if="${!editNameMode}">
                <span th:text="${chatroom.name}">Chatroom Name</span><br>
            </span>
            <span th:if="${true || editNameMode}">
                <form th:action="@{/chatrooms/{id}/edit(id=${chatroom.id})}" method="post" class="d-inline">
                        <label><br>
                            <div class="me-2 small">Edit Group Name</div>
                            <input type="text" name="name" th:value="${chatroom.name}" required
                                   class="form-control d-inline-block w-auto" style="display: inline; width: auto;" />
                        </label>
                    <button type="submit" class="btn btn-primary btn-sm">Save Edit</button>
                </form>
            </span>
        </span>
        <span th:if="${!(chatroom.type == T(com.app.model.ChatroomType).GROUP and chatroom.editableName)}" th:text="${chatroom.name}">Chatroom Name</span>
    </h2>

    <div th:replace="~{fragments/chatroom/chatroom-managment :: chatroomManagment(${chatroomType}, ${chatroomId}, ${editNameMode})}"></div>
</div>

<footer th:replace="~{fragments/footer.html :: footer}"> </footer>

<div th:insert="fragments/scripts.html :: bootstrapScript"></div></body>
</html>
